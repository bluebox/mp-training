{% extends 'shop/basic.html' %}
{% block title %} {{product.product_name}}-My shopping {% endblock %}
  {% block body %}
<div class="container my-4">
    <div class="row">
    <div class="col-md-4">
        <div class="row">
             <img src='/media/{{product.image}}' class="card-img-top" alt="...">
        </div>
        <div class="row">
            <button class="btn btn-primary mx-3">Buy Now</button>
            <button class="btn btn-primary ">Add To Cart</button>
        </div>
    </div>
    <div class="col-md-8 my-10">
        <h5 class="my-8">{{product.product_name}}</h5>
        <p><b>price: ${{product.price}}</b></p>
        <p>{{product.desc}}</p>
    </div>
    </div>
</div>
{% endblock %}
{% block js %}
<script>
    if(localStorage.getItem('cart')== null){
    var cart = {};
    }
    else{
    cart = JSON.parse(localStorage.getItem('cart'))
    document.getElementById('cart').innerText = Object.keys(cart).length;
    console.log(cart)
    }
    $('.cart').click(function(){
    var idStr = this.id.toString();
    if(typeof cart[idStr]!='undefined'){
    cart[idStr] = cart[idStr] + 1;
    }
    else{
    cart[idStr] = 1;
    }
<!--        console.log(cart)-->
        localStorage.setItem('cart',JSON.stringify(cart))

        console.log(Object.keys(cart).length)
    })
    $('#popcart').popover('show')
<!--    document.getElementById('popcart').setAttribute('data-content',<h5>Cart</h5>)-->
</script>
{% endblock %}