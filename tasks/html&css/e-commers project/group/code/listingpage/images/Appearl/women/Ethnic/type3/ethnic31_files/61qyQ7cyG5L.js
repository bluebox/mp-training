(function(n){var p=window.AmazonUIPageJS||window.P,z=p._namespace||p.attributeErrors,a=z?z("DetailPageAttachAssets",""):p;a.guardFatal?a.guardFatal(n)(a,window):a.execute(function(){n(a,window)})})(function(n,p,z){"use strict";n.register("attach-variant-registration",function(){function a(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0}var b={};a("WTY_ENABLE_INSTALLMENTS_DSS_LAUNCH_421616:T1");return{registerVariantFlag:a,getVariantFlag:function(a){return b.hasOwnProperty(a)}}});
"use strict";n.when("A","attach-weblabs","attach-logging","attach.amazonapi.cart.add-items").register("attach-baselink",function(a,b,g,e){var c=null;n.when("BaseLinkFormHelper").execute(function(a){c=a});var l=function(a){p.ueLogError&&p.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return c?c.addBaseLinkFields(a,b):null},addLinkedWarranty:function(a,b,c){if(!a||!a.baseItemAsin)return l("baseItemAsin is undefined. Abandoning ATC since Base item and Warranty association can not be done."),
c();a={asin:a.warrantyAsin,offerListingId:a.offeringId,quantity:parseInt(a.quantity),additionalParameters:{itemAssociation:{associatedItemId:a.baseItemAsin,deleteConstraint:{mutuallyInclusive:!1},quantityConstraint:{invarianceFactor:1,quantityEditable:!0},programType:"AmazonProtect",renderType:"renderAll"}}};e.addItems([a],g.REF_TAGS.WARRANTY_ADD_TO_CART).then(b).catch(c)},mSilogError:l}});"use strict";n.when("A").register("attach-external-atc-interceptor",function(a){var b=a.$,g=[],e=[],c=!1,l=!1,
r=function(){l=!0},h=function(a){var c=e.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};return{updateAttachModule:function(a){r&&(c?h(a):g.push(a))},loadAttachModule:function(a){if(l)for(c=!0,e=a;0<g.length;)a=g.shift(),h(a)},unloadAttachModule:function(){c=!1;e=[]},enableModule:r}});"use strict";n.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},
preinitiateCheckout:function(b){var g=a.$("#attach-desktop-sideSheet");var e=a.$("#attach_accessory_sheet");g=g.length?g:e;g.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;e=document.createElement("iframe");e.setAttribute("src",b);e.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");e.setAttribute("name","checkoutPrefetch");e.setAttribute("id","checkoutPrefetch");g.append(e)}}});"use strict";n.when("A","attach-common",
"attach-variant-registration").register("attach-weblabs",function(a,b,g){var e={},c=e.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",
WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint",MOBILE_WEB_MBS_EXPERIMENT_WEBLAB:"#attach-accessory-mobile-web-mbs",SHOW_WFM_ENABLE:"#attach-enabled-for-wfm"},l=e.Marketplaces={IN:"A21TJRUUN4KGV"};e.isWarrantyPaneSuppressed=function(){return a.$(c.ATTACH_MARKETPLACE_ID).val()===l.IN&&(!e.servicesInterstitialDeprecated()||b.hasAccessories())};e.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(c.SHOW_ACCESSORY_COUPONS_DSS)};e.isShowAccessoryCouponsMbsEnabled=
function(){return b.elementExists(c.SHOW_ACCESSORY_COUPONS_MBS)};e.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(c.CORE_FREE_SHIPPING_MESSAGE)};e.isAttachDebugParametersEnabled=function(){return 0<a.$(c.DEBUG_IS_DEBUG).length||0<a.$(c.DEBUG_QUERY_STRING).length};e.isInstallmentsDssIntegrationEnabled=function(){return g.getVariantFlag("WTY_ENABLE_INSTALLMENTS_DSS_LAUNCH_421616:T1")};e.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(c.WTY_TWISTER_CONTAINER).length};
e.isAmazonApiAjaxEnabled=function(){return b.elementExists(c.AAPI_AJAX_ENDPOINT)};e.isAttachEnabledForWFM=function(){return b.elementExists(c.SHOW_WFM_ENABLE)};e.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};e.isAttachGetCartDescriptionEndpointDeprecated=function(){return g.getVariantFlag("ATTACH_ENDPOINT_GET_CART_DESCRIPTION_DEPRECATION_398030:T1")};e.isMobileWebMBSEnabled=function(){return b.elementExists(c.MOBILE_WEB_MBS_EXPERIMENT_WEBLAB)};return e});
"use strict";n.when("A").register("attach-logging",function(a){var b={},g,e,c;b.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"11",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"15",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",
WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss",MBS:"mbs",MBS_APP:"mbs_app",MBS_WEB:"mbs_web"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",
ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",
ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",
MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",DSS_BASE_LD_MISSING_TIMER:"attachDesktopBaseLightningDealMissingTimer",MBS_BASE_LD_MISSING_TIMER:"attachMobileBaseLightningDealMissingTimer",DSS_LD_MISSING_ATTACH:"attachDesktopLightningDealMissingAttachContainer",MBS_APP_LD_MISSING_ATTACH:"attachMobileAppLightningDealMissingAttachContainer",MBS_WEB_LD_MISSING_ATTACH:"attachMobileWebLightningDealMissingAttachContainer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",
ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError",ATTACH_MBS_ATC_STAY_AJAX_SUCCESS:"attachMbsAtcStayAjaxSuccess",ATTACH_MBS_ATC_STAY_AJAX_FAILURE:"attachMbsAtcStayAjaxFailure",ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE:"attachMbsAtcStayAjaxIncomplete",ALM_DSS_BASE_ATC_SUCCESS:"almAddBaseSuccessDss",ALM_DSS_BASE_ATC_FAILURE:"almAddBaseFailureDss",ALM_MBS_BASE_ATC_SUCCESS:"almAddBaseSuccessMbs",ALM_MBS_BASE_ATC_FAILURE:"almAddBaseFailureMbs"};
b.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.METRICS={DPX_MOBILE_APP_ATC:"DetailPage_MobileApp_AddToCart",DPX_MOBILE_WEB_ATC:"DetailPage_MobileWeb_AddToCart"};b.initialize=function(a,c){g=a;e=c;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_"}};b.setPayloadBuilder=function(a){c=function(){var c=a();c.feature=g;c.obfuscatedMarketplaceId=e||p.ue_mid;c.producerId=b.NEXUS.PRODUCER_ID;c.requestId=b.getRandomHexString();return c}};b.getRandomHexString=
function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(c,e){p.ue&&p.ue.event&&(c.customerId=a.$("#attach-customerId").val()||null,p.ue.event(c,b.NEXUS.PRODUCER_ID,e,{ssd:!1}))};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.logAccessoryAddToCart=function(a){var l=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,h=c();h.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;h.displayPosition=parseInt(a.index)+1;h.accessoryAsin=a.asin;h.accessoryAsinPrice=a.priceFormatted;h.accessoryItemCurrencySymbol=a.currencySymbol;h.accessoryItemPriceDecimal=a.priceDecimal;h.couponType=a.couponType;h.couponDecimal=a.couponDecimal;
h.dealType=a.dealType;h.dealPercentSavings=a.dealPercentSavings;h.dealDollarAmount=a.dealDollarAmount;h.categoryDisplayPosition=parseInt(a.categoryIndex)+1;h.categoryTitle=a.categoryTitle;h.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(h,l)};b.logAccessoryImpressions=function(a){var l=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,h=c();h.accessories=[];for(var e=0;e<a.length;e++){var g=a[e];h.accessories.push({displayPosition:parseInt(g.index)+
1,asin:g.asin,price:g.priceFormatted,currencySymbol:g.currencySymbol,priceDecimal:g.priceDecimal,couponType:g.couponType,couponDecimal:g.couponDecimal,dealType:g.dealType,dealPercentSavings:g.dealPercentSavings,dealDollarAmount:g.dealDollarAmount,categoryDisplayPosition:parseInt(g.categoryIndex)+1,categoryTitle:g.categoryTitle,displayPositionWithinCategory:parseInt(g.asinIndexWithinCategory)+1})}b.log(h,l)};b.logWarrantyAddToCart=function(a,e){var h=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;
e&&(h=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION);var l=c();l.asin=a.asin;l.price=a.priceFormatted;l.warrantyCurrencySymbol=a.currencySymbol;l.warrantyPriceDecimal=a.priceDecimal;b.log(l,h);e||b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,a.asin)};b.logWarrantyImpression=function(a){var e=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,h=c();h.asin=a.asin;h.price=a.priceFormatted;h.warrantyCurrencySymbol=a.currencySymbol;h.warrantyPriceDecimal=
a.priceDecimal;b.log(h,e);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyRefTag=function(a,e){var h=c().baseAsin;b.logRefTag(a+h+"_"+e)};b.logSecondarySheetRefTag=function(a){var e=c().baseAsin;b.logRefTag(a+"_"+e)};b.logRefTag=function(c){"A21TJRUUN4KGV"===e&&a.get(b.ENDPOINTS.REF_TAG_IN+c)};b.logMobileBaseAtc=function(c){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);c&&c.data&&"add-to-cart"===c.data.buttonID&&(c=a.$("#attach-is-amazon-app").val()?b.METRICS.DPX_MOBILE_APP_ATC:
b.METRICS.DPX_MOBILE_WEB_ATC,b.logCount(c))};b.logMapleError=function(){p.ue&&p.ue.count&&p.ue.count("MAPLE::DSS::Error",(p.ue.count("MAPLE::DSS::Error")||0)+1)};b.logCount=function(a,b){p.ue&&p.ue.count&&(b=b||1,p.ue.count(a,(p.ue.count(a)||0)+b))};b.logError=function(a,b,c){p.ueLogError&&p.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var e=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,h=c();b.log({quantity:h.quantity.toString(),
baseAsin:h.baseAsin,warningMessage:a},e)};b.logPromotionClaimed=function(a){var e=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,h=c();h.asin=a.asin;h.accessoryCurrencySymbol=a.currencySymbol;h.accessoryPriceDecimal=a.priceDecimal;h.displayPosition=a.index+1;null!==a.couponType&&(h.promoDecimal=a.couponDecimal,h.promoDecimalType=a.couponType,h.promoType="coupon");b.log(h,e)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(p.uet)&&
p.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(p.uex)&&p.uex("ld",a,{wb:1})};return b});"use strict";n.when("A","attach-logging").register("attach-maple",function(a,b){var g={},e;g.initialize=function(){e=!1};g.loadBannerHTML=function(){var c=a.$.Deferred(),g={};e&&(g.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:g,success:function(a){c.resolve(a)},error:function(){b.logMapleError();c.resolve(null)}});return c.promise()};g.suppressMathBox=function(){e=!0};g.updateMathBox=
function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return g});"use strict";n.when("A","3p-promise","attach-variant-registration","attach-logging").register("attach-common",function(a,b,g,e){var c={},l=c.Marketplaces={IN:"A21TJRUUN4KGV"};c.uniqueId=null;c.itemAssocTypeValue="Attach";c.selectedBaseLightningDeal=!1;c.cartInitiateId=!1;c.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4};var r=c.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",
ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled",IS_AMAZON_APP:"#attach-is-amazon-app",DSS_CART:".attach-cart-button",DSS_PROCEED:".attach-checkout-button",ALM_BRAND_ID_SELECTOR:"#attach-alm-brand-id",ALM_WFM_BRAND_ID:"VUZHIFdob2xlIEZvb2Rz"},h=c.Endpoints={PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"};c.buyButton=a.$(r.ADD_TO_CART_BUTTON);c.isAmazonApp=a.$(r.IS_AMAZON_APP).length?"true"===a.$(r.IS_AMAZON_APP).val():
a.capabilities.isAmazonApp;c.reject=function(b,e){return c.rejectPromise(a.$.Deferred(),b,e)};c.rejectPromise=function(b,c,f){if(f&&f.count&&p.ue&&p.ue.count)if("string"===typeof f.count)p.ue.count(f.count,1);else if(a.$.isArray(f.count))for(var e=0;e<f.count.length;e++)p.ue.count(f.count[e],1);return b.reject(c,f)};c.pipeJSON=function(a){try{return JSON.parse(a)}catch(D){return c.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};c.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,
'"');return a=a.replace(/&pipe;/g,"||")};c.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};c.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};c.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};c.hasWarranty=function(){return c.elementExists("#attachSIDeprecated")&&c.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};c.hasMonthlyWarranty=
function(){return c.elementExists("#attach-monthly-warranty")};c.hasAccessories=function(){return c.elementExists("#attach-asin-list")};c.isDiscriminatedOffersEnabled=function(){return c.elementExists(r.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(r.DISCRIMINATED_OFFERS_ENABLED).val():a.$(r.ATTACH_MARKETPLACE_ID).val()===l.IN};c.submitATCForm=function(){var b=c.getAtcForm();e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_CLICK);b=b.serializeArray();b=a.$.param(b);b=a.$.ajax({type:"POST",url:"/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",
data:b,headers:{Accept:"text/html"}});b.fail(function(a){e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);e.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};c.getAtcForm=function(){return c.buyButton.closest("form")};c.isMTAEnabledForAttach=function(){return!0};c.isWFMPage=function(){return a.$(r.ALM_BRAND_ID_SELECTOR).val()===r.ALM_WFM_BRAND_ID};c.getDeferredFromPromise=function(b){var c=a.$.Deferred();b.then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)});
return c.promise()};c.getPromiseFromDeferred=function(a){return new b(function(b,c){a.then(b).fail(c)})};c.bindEventToCallback=function(b,c,f){a.$(b).unbind(c,f);a.$(b).bind(c,f)};c.setupDesktopEgressButtons=function(){c.bindEventToCallback(r.DSS_CART,"click",function(){e.logCount(e.CSM_METRICS.ATTACH_CART_CLICK)});c.bindEventToCallback(r.DSS_PROCEED,"click",function(){e.logCount(e.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=c.cartInitiateId?h.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+
c.cartInitiateId+"\x26ref_\x3ddp_atch_dss_proceed":h.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"})};return c});"use strict";n.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration","attach.utilities.focus-management").register("attach-desktop-warranty-pane",function(a,b,g,e,c,l,r){var h={name:"warranty"},m=h.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",
BASE_ASIN:'input[name\x3d"items[0.base][asin]"], #ASIN',MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",
PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"},D;h.getWarrantyLoggingPayload=function(){var f=a.$(m.ASIN).val(),e=a.$(m.PRICE_FORMATTED),h=a.$(m.PRICE_AMOUNT);return!c.servicesInterstitialDeprecated()&&b.elementExists(h)?{asin:f,priceFormatted:e.text().trim(),priceDecimal:parseFloat(h.val())||null,currencySymbol:a.$(m.BASE_CURRENCY_SYMBOL).val()||
null}:{asin:f,priceFormatted:e.text().trim(),priceDecimal:null,currencySymbol:null}};h.appendWarrantyToATCForm=function(f,h){if(a.$(m.BASE_ASIN).val()&&f&&h){var g=b.getAtcForm();g.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var d=1;c.isWarrantyTwisterPlusDesktopEnabled()&&(d+=1);d=g.find("input[name^\x3d'offeringID']").length+d;var l=a.$(m.ATC_QUANTITY).val()||1,r="quantity."+d,w="asin."+d;g.find('input[name\x3d"'+
r+'"]').remove();g.find('input[name\x3d"'+w+'"]').remove();g.append('\x3cinput type\x3d"hidden" id\x3d"'+r+'" name\x3d"'+r+'" value\x3d"'+l+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"'+w+'" name\x3d"'+w+'" value\x3d"'+f+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+d+'" name\x3d"offeringID.'+d+'" value\x3d"'+h+'" class\x3d"attach-warranty-input"/\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][quantity]" value\x3d"'+
l+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][asin]" value\x3d"'+f+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][offerListingId]" value\x3d"'+h+'" class\x3d"attach-warranty-input" /\x3e');f=g.find('input[name\x3d"itemCount"]');0===f.length?g.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+d+'"\x3e'):f[0].value=d;a.$("#atch__bl").length&&e.createBaseLinkFormFields(d+
1,g)}};h.clearWarrantyFromATCForm=function(){b.getAtcForm().find(m.ATC_WARRANTY).remove()};h.load=function(f){if(c.servicesInterstitialDeprecated()){if(b.elementExists(m.PANE))a.$(m.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(b.selectedBaseLightningDeal)if(b.elementExists(m.PANE_LD))a.$(m.PANE+", "+m.PANE_LD).toggleClass("aok-hidden");else return b.reject(b.FailureModes.UNBIND_ATC);b.elementExists(m.PANE_EXPERIMENT_DISPLAY)&&
a.$(m.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(m.JSON_DATA)){var e=b.unescapeJson(a.$(m.JSON_DATA).val());e=JSON.parse(e)}return e?h.renderClientSide(f,e):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};h.renderClientSide=function(b,c){var f="",d=c.baseASIN,e="dp_atch_dss_w_lm_"+d+"_"+c.asin,g="dp_atch_dss_w_r_"+d+"_"+c.asin;d="dp_atch_dss_w_lm_"+d+"_"+c.asin;var h=a.$("#stringTranslation-si-warranty-title").val(),l=a.$("#stringTranslation-si-accident-protection").val(),
m=a.$("#stringTranslation-si-from").val(),r=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),k=a.$("#stringTranslation-item-added-to-cart").val(),n=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),q=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),E=a.$("#stringTranslation-si-add-coverage").val(),F=a.$("#stringTranslation-si-no-thanks").val(),H=a.$("#stringTranslation-services-bundle-detail-link").val();f+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+
c.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+h+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';null!==c.thumbImage&&(f+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+c.thumbImage+
'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');f+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+c.asin+"/ref\x3d"+e+'"\x3e\n                        \x3cstrong\x3e'+(null!==c.displayTitle?c.displayTitle:l.replace("${brandName}",c.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+
m+" "+c.merchantName+"\x3c/span\x3e\n";Number(c.averageRating)&&Number(c.numReviews)&&Number(c.numFullStars)&&"boolean"===typeof c.hasHalfStar&&(e=r.replace("${averageRating}",c.averageRating),f+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+c.numFullStars+
(c.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+e+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+c.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");null!==c.buyingPriceAmount&&(f+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+
c.buyingPriceAmount+'"\x3e\n');f+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+c.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(g=0;g<c.bulletPoints.length;g++)f+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+c.bulletPoints[g].text+"\x3c/span\x3e\x3c/li\x3e\n";f+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
k+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
n+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+q+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
c.asin+'" data-offering-id\x3d"'+c.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+E+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
F+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+d+'"\x3e\n                '+H+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(f)};h.onAttachAddBaseToCart=function(a){a.always(h.clearWarrantyFromATCForm)};h.setup=function(f){h.sheet=f;a.$(m.PANE).hide();var l=a.$(m.PANE_IMAGE).attr("data-image-url");a.$(m.PANE_IMAGE).attr("src",l);a.$(m.PANE_ADD_BUTTON).click(function(){var e=a.$(this).find("button");c.servicesInterstitialDeprecated()&&(e=a.$(this).find("[data-asin]"));var d=e.attr("data-asin");
e=e.attr("data-offering-id");h.appendWarrantyToATCForm(d,e);g.logWarrantyAddToCart(h.getWarrantyLoggingPayload());c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();f.next()});a.$(m.PANE_NO_BUTTON).click(function(){c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();f.next()});a.$(m.PANE_ADD_BUTTON_LD).click(function(){var b=a.$(m.PANE_ADD_BUTTON_LD).find("input");b={warrantyAsin:b.attr("data-asin"),offeringId:b.attr("data-offering-id"),addWarranty:1,
quantity:1};b.baseItemAsin=a.$(m.BASE_ASIN).val();e.addLinkedWarranty(b,function(b){g.logCount(g.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);n.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});a.$("#attach-sheet-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");f.next()},function(a){g.logCount(g.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);f.next()})});a.$(m.PANE_NO_BUTTON_LD).click(function(){f.next()});
a.off("attach:add-base-to-cart",h.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",h.onAttachAddBaseToCart)};h.show=function(){b.selectedBaseLightningDeal?b.selectedBaseLightningDeal&&a.$(m.PANE_LD).show():a.$(m.PANE).removeClass("aok-hidden");a.$(m.PANE).fadeIn(400,h.setFocus);g.logWarrantyImpression(h.getWarrantyLoggingPayload());D=Date.now();a.$(m.PANE).find("h1").first().attr("id","attach-warranty-header");h.sheet&&h.sheet.$container&&h.sheet.$container.attr("aria-labelledby","attach-warranty-header")};
h.hide=function(){a.$(m.PANE+", "+m.PANE_LD).fadeOut();g.logCount(g.CSM_METRICS.WARRANTIES_DWELL_TIME,Math.floor((Date.now()-D)/1E3))};h.setFocus=function(){r.focusDescendant(a.$(m.PANE).get(0),"first");r.focusDescendant(a.$(m.PANE_LD).get(0),"first")};return h});"use strict";n.when("A","attach-common","attach-weblabs","attach-maple","attach-logging","attach-variant-registration","attach.utilities.focus-management","attach.amazonapi.client","attach.amazonapi.cart.add-items","attach.amazonapi.cart.summary",
"attach.amazonapi.deals.claim-and-add-to-cart","attach.utilities.strings","attach.utilities.data-driven-weblabs").register("attach-desktop-accessories-pane",function(a,b,g,e,c,l,r,h,m,D,f,w,v){var d={name:"accessories"},x=!0,t=!1,y,A=!1,C;d.isEmptyAccessoryList=!1;var B=d.Endpoints={RENDER:"/gp/product/ajax?experienceId\x3dattach",GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html"},k=d.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",
ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",
PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE:"#attach-cart-description-failure",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",
PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",
PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",
PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",
PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},u=d.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};d.setShouldIncludeMaple=function(a){t=a};d.load=function(q){n.now("attach-external-atc-interceptor").execute(function(a){y=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var f=a.$.Deferred();n.now("dp-util-cookie").execute(function(c){c&&c("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(f,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",
information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+c("session-id")})});var g=a.$.get(B.RENDER,{asin:a.$(k.BASE_ASIN).val()});if(t){b.isCurrencyOfPreferenceApplied()&&e.suppressMathBox();var h=e.loadBannerHTML()}a.$.when(g,h).done(function(e,g){var E=a.$(e[0].trim()),h=!E.is(k.PANE);d.isEmptyAccessoryList=0===E.find(k.PANE_ACCESSORY_ASIN).length;h||d.isEmptyAccessoryList?b.rejectPromise(f,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE",
"ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],information:"Failed to render DSS: isPaneMissing\x3d"+h+" isEmptyAccessoryList\x3d"+d.isEmptyAccessoryList}):(q.$container.append(a.$(e[0]).get(0)),g&&0<g.trim().length&&(g=a.$(g),e=g.not("script"),g=g.filter("script"),b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?e.insertAfter(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):e.insertAfter(k.PANE_ACCESORIES_CARD),e.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),
g.each(function(){a.$.globalEval(this.innerHTML)}),c.logCount("ATTACH_DSS_MAPLE_RENDERED")),f.resolve())}).fail(function(){b.rejectPromise(f,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});return f.promise()};d.onAttachAddBaseToCart=function(a){x=!1;g.isAttachGetCartDescriptionEndpointDeprecated()?b.getPromiseFromDeferred(a).then(d.handleAddBaseAndGetCartDescription).catch(function(a){n.logError(a,"Base product add to cart failed: ",
"ERROR","attach-desktop-accessories-pane");d.sheet.fail(b.FailureModes.ERROR_500)}):a.pipe(d.handleAddBaseAndGetCartDescription).pipe(b.pipeJSON).pipe(d.handleCartDescription).fail(function(a,c){d.sheet.fail(a||b.FailureModes.ERROR_500,c)})};d.runOnceSetup=function(){A||(A=!0,a.declarative("attach-accessory-add","click",function(b){var q=b.$currentTarget,f=b.data,e=f.a,g=f.oid;f=f.isLightningDeal;c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);c.beginLatencyCapture(c.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);
b=!0===a.$(k.PANE_CATEGORIZED_ACCESSORIES_CARD).data(k.PANE__DATA_CATEGORY_VIEW)?a.$(b.$target).data(k.PANE__DATA_ASIN_INDEX):a.$(k.PANE_ACCESSORY_ADD_DECLARATIVES).index(q);f?d.addAccessoryToCartWithLightningDeal(b,e):d.addAccessoryToCart(e,g,b)}))};d.setup=function(c){d.runOnceSetup();a.$(k.PANE).hide();d.sheet=c;a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart);b.setupDesktopEgressButtons();a.$(k.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=
a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),q=a.$(this).attr("data-idx");d.addAccessoryToCart(b,c,q)});a.$(k.PANE).find(k.PANE_CLOSE_BUTTON).appendTo(k.PANE_CART_BLOCK);a.$(k.PANE_CLOSE_BUTTON).click(c.next);a.$(k.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});g.isShowAccessoryCouponsDssEnabled()&&d.initializeCoupons();a.$(k.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;d.updateLightningDealTimer(b);d.initializeLightningDealStatusRefresher(b)})};
d.show=function(){!b.selectedBaseLightningDeal&&x&&b.submitATCForm();C=Date.now();a.$(k.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear");if(b.selectedBaseLightningDeal)a.$(k.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(p).height()-161);else{var c=a.$(k.PANE_CART_BLOCK_INNER);c.find("div").addClass("aok-hidden");c.append(a.$(k.PANE_CART_SPINNER).removeClass("aok-hidden"))}d.initializeAccessoriesDisplay();n.now("attach-categorized-cards").execute(function(a){a!==
z&&a.initializeCategorizedCards()})};d.hide=function(){a.$(k.PANE).hide();a.$(k.PANE_CART_SPINNER).addClass("aok-hidden");a.$(k.PANE_HUC_MESSAGE).remove();a.$(k.PANE_ACCESSORY_ASIN).each(function(b,c){(c=a.$(c).data(k.PANE__DATA_ASIN_INDEX))&&(b=c);d.updateAccessoryStatus(b,u.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");y&&y.unloadAttachModule();c.logCount(c.CSM_METRICS.ACCESSORIES_DWELL_TIME,Math.floor((Date.now()-C)/1E3));a.trigger("aloha:detailPage:reappear");x=!0};d.updateNavCartDisplayQuantity=
function(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)};d.createCartSubtotalLabelString=function(b){var c=a.$(1==b?k.PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:k.PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE).val();return w.substituteParameters(c,{quantity:b})};d.createProceedToCheckoutString=function(b){var c=
a.$(1==b?k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE).val();return w.substituteParameters(c,{quantity:b})};d.updateCartSummary=function(){return D.get([D.CART_TYPE_RETAIL]).then(d.handleCartDescription).catch(d.handleCartDescriptionError)};d.requestCartDescription=function(b){var c={marketplaceId:a.$(k.MARKETPLACE_ID).val(),asin:a.$(k.BASE_ASIN).val(),languageOfPreference:a.$(k.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),
sessionId:a.$("#attach-sessionId").val()};if(b)for(var q in b)b.hasOwnProperty(q)&&(c[q]=b[q]);return a.$.post(B.GET_CART_DESCRIPTION,c)};d.handleAddBaseAndGetCartDescription=function(q){c.logCount(c.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);q=a.$(q);q.find("#sw-atc-confirmation").length?(d.renderFallbackSmartWagonFeedback(q),d.renderFallbackSmartWagonBaseAddStatusIcon(q)):(d.renderHUCFeedback(q),d.renderBaseAddStatusIcon(q));if(y)try{var f=a.$(k.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();
y.loadAttachModule(f)}catch(F){n.logError(F,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}d.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");r.focusDescendant(a.$(k.PANE).get(0),"first");return g.isAttachGetCartDescriptionEndpointDeprecated()?d.updateCartSummary():d.requestCartDescription().pipe(null,function(a,q,d){n.logError(Error(q),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return b.reject(null,
{count:c.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};d.handleCartDescription=function(q){var f=0;try{if(g.isAttachGetCartDescriptionEndpointDeprecated()){var l=q.entity.summary[0]||D.EMPTY_CART_RETAIL,m=l.subtotal;f=l.itemCount;var r=Number(m.amount);var p=h.formatMoney(m);var w=d.createCartSubtotalLabelString(f);var y=d.createProceedToCheckoutString(f)}else{var u=isNaN(parseInt(q.totalPrice)),v=isNaN(parseInt(q.itemQuantity)),x=!a.$.isArray(q.includedAsins),A=0===q.formattedTotalPrice.trim().length,
C=0===q.cartSubtotalString.trim().length,B=0===q.itemQuantityString.trim().length;l=u||v||x;A||C||B;if(l)throw Error("Received invalid cart description: hasInvalidCartTotalPrice\x3d"+u+" hasInvalidCartItemQuantity\x3d"+v+" hasInvalidCartIncludedAsins\x3d"+x+" hasInvalidCartFormattedTotalPrice\x3d"+A+" hasInvalidCartSubtotal\x3d"+C+" hasInvalidCartQuantity\x3d"+B);f=q.itemQuantity;r=Number(q.totalPrice);p=q.formattedTotalPrice;w=q.cartSubtotalString;y=q.itemQuantityString;var z=q.coreFreeShippingMessage}d.updateNavCartDisplayQuantity(f);
a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(w);a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(p);a.$(k.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(y);a.$(k.PANE_CHECKOUT_BUTTON).removeClass("aok-hidden");a.$(k.PANE_VIEW_CART_BUTTON).removeClass("a-button-primary");a.$("#attach-customerId").val()&&n.when("attach-preinitiate-checkout").execute(function(a){b.cartInitiateId=a.getCartInitiateId();a.preinitiateCheckout(b.cartInitiateId)});z&&a.$(k.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(z);t&&e.updateMathBox(r);
b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).addClass("aok-hidden"));a.delay(d.revealIMBMessages,200);n.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});c.logCount(c.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return q}catch(I){if(g.isAttachGetCartDescriptionEndpointDeprecated())throw I;n.logError(I,"Could not process the cart description: ",
"ERROR","attach-desktop-accessories-pane");return b.reject(null,{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};d.handleCartDescriptionError=function(q){n.logError(q,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");c.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE");b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).empty(),
a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).empty(),a.$(k.PANE_CHECKOUT_BUTTON).addClass("aok-hidden"),a.$(k.PANE_VIEW_CART_BUTTON).addClass("a-button-primary"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).removeClass("aok-hidden"))};d.updateAccessoryStatus=function(b,c){a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",c!==u.INITIAL);a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",c!==u.ADDING);a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",
c!==u.SUCCESS);a.$(k.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",c!==u.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",c!==u.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",c===u.SUCCESS);b=a.$("#attach-accessory-asin-"+(b+1)).parent();r.focusDescendant(b.get(0),"first")};d.addAccessoryToCart=function(q,f,e){d.updateAccessoryStatus(e,u.ADDING);var h=function(f){if(!g.isAttachGetCartDescriptionEndpointDeprecated()&&-1===a.$.inArray(q,f.includedAsins))return b.reject(null,
{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});d.updateAccessoryStatus(e,u.SUCCESS);c.logAccessoryAddToCart(d.getAccessoryLoggingData(e));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",e);n.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()})},l=function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(e,u.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",e)},E=function(a){if(a.type===m.RESPONSE_TYPE_SUCCESS)return g.isAttachGetCartDescriptionEndpointDeprecated()?
d.updateCartSummary():d.requestCartDescription().promise();n.logError(Error(a.entity.details.message),"Could not add accessory via AmazonAPI ("+q+"):","ERROR","attach-desktop-accessories-pane");throw a.entity.details.message;},r=a.$(k.BASE_ASIN).val(),F=parseInt(a.$(k.QUANTITY).val())||1,p=z;b.isDiscriminatedOffersEnabled()&&(p={itemAssociation:{programType:"Attach",renderType:"renderAll",associatedItemId:r,deleteConstraint:{mutuallyInclusive:!1}}});f={asin:q,offerListingId:f,quantity:F,additionalParameters:p};
g.isAttachGetCartDescriptionEndpointDeprecated()?m.addItems([f],"dp_atch_dss_atc_").then(E).then(h).catch(l):m.addItems([f],"dp_atch_dss_atc_").then(E).then(b.pipeJSON).then(d.handleCartDescription).then(h).catch(l)};d.addAccessoryToCartWithLightningDeal=function(q,e){d.updateAccessoryStatus(q,u.ADDING);var h=a.$("#attach-accessory-claim-deal-url-"+q).val();h=d.getDealId(h);f.claimAndAddDeal(h,e).then(function(f){var e=f.entity;f=e.customerState;if(!0!==e.claimed&&"INWAITLIST"!==f)return b.reject(null,
{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===f?a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+q).addClass("aok-hidden"):d.updateAccessoryStatus(q,u.SUCCESS);c.logAccessoryAddToCart(d.getAccessoryLoggingData(q));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);e=e.msUntilExpiration;d.handleLightningDealAddToCart(q,e?e:900,f);a.trigger("UPSELL_ASIN_ADDED_TO_CART",q);n.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});g.isAttachGetCartDescriptionEndpointDeprecated()?
d.updateCartSummary():d.requestCartDescription({isLightningDeal:!0}).pipe(b.pipeJSON).pipe(d.handleCartDescription)}).catch(function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(q,u.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",q)})};d.getDealId=function(a){return(a=a.match(/\/api\/marketplaces\/\w+\/deals\/(.*?)\/claim-and-add-to-cart/))?a[1]:z};d.revealIMBMessages=function(){var b=a.$(k.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",
top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};d.renderHUCFeedback=function(d){var f=d.find("#hlb-ship-message");d=a.$().add(d.find("#huc-v2-message-group")).add(d.find("#hlb-imb"));g.isCoreFreeShippingMessageEnabled()&&b.elementExists(f)&&a.$(k.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(f.html());0<d.length&&(f=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),
f.append(d),f.insertAfter(k.PANE_CART_BLOCK),f.find(".a-declarative a").unwrap(),f.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),f.find(".sc-action-quantity").hide(),(f=d.find(".a-alert-heading").text())&&c.logDSSWarningMessage(f))};d.renderBaseAddStatusIcon=function(c){var d;b.elementExists(c.find("#huc-v2-order-row-confirm-text"))?d=c.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(c.find("#hl-confirm-text"))&&(d=c.find("#hl-confirm-text").hasClass("a-alert-warning"));
d=(d?a.$(k.PANE_CART_BASE_ERROR_ALERT):a.$(k.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(k.PANE_CART_BASE_ALERT).remove();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=c.find(".huc-v2-order-row-image").clone();b.elementExists(d)||(d=c.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var f=a.$('input[name^\x3d"asin"].attach-warranty-input');0===f.length&&(f=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(f))for(var q=0;q<
f.length;q++){var e=f[q].value,g=c.find("#huc-v2-order-row-item-"+e);if(g.length){c=b.elementExists(g)?g.find(".huc-v2-order-row-image"):c.find(".hlb-item-link.hlb-asin-"+e+" \x3e img");d=d.add(c.clone());break}}}a.$(k.PANE_CART_BASE_HUC_IMAGE).remove();a.$(k.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};d.renderFallbackSmartWagonFeedback=function(b){b=b.find("#cart-important-message-box");if(0<b.length){var c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");
c.append(b);c.find("#sc-important-message-alert").removeClass("a-spacing-medium-plus").addClass("a-spacing-mini");c.find(".sc-action-quantity").hide();c.insertAfter(k.PANE_CART_BLOCK)}};d.renderFallbackSmartWagonBaseAddStatusIcon=function(b){var c=b.find(".sw-atc-message").first().parent().clone();c.prop("id","attachDisplayAddBaseAlert");c.addClass("sw-fallback");c.addClass("aok-hidden");a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).empty();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);b.find("#add-to-cart-confirmation-image").find(".sc-product-image").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA).wrap('\x3cdiv class\x3d"huc-image-wrapper aok-hidden sw-fallback"\x3e\x3c/div\x3e');
b=b.find(".sw-atc-extra-item").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA);b.addClass("aok-hidden sw-fallback");b.find(".sw-atc-item-no").prepend('\x3cspan class\x3d"a-size-small"\x3e+\x3c/span\x3e')};d.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};d.createAccessoryImpressions=function(){var b=[];a.$(k.PANE_ACCESSORY_ASIN).parent().each(function(c,f){f=a.$(f);if(f.is(":hidden")||"hidden"===f.css("visibility")||f.prop("data-accessory-seen"))return null;f.prop("data-accessory-seen",!0);b.push(d.getAccessoryLoggingData(c))});return b};d.resetAccessoryImpressions=function(){a.$(k.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};d.initializeAccessoriesDisplay=
function(){d.initializeAccessoriesCards();d.initializeAccessoriesTiles();d.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){d.resetAccessoryImpressions();c.logAccessoryImpressions(d.createAccessoryImpressions());v.triggerClientSideWeblabs()})};d.initializeAccessoriesCards=function(){a.$(k.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),f=b.find(k.PANE_ACCESSORY_CARD_SEE_MORE),e=b.find(k.PANE_ACCESSORY_CARD_SEE_LESS),g=b.find(k.PANE_ACCESSORY_CARD_EXPAND_CONTENT);f.show();
e.hide();g.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");f.click(function(){f.hide();e.show();g.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),c.logAccessoryImpressions(d.createAccessoryImpressions()));c.logCount(c.CSM_METRICS.ATTACH_SHOW_MORE)});e.click(function(){e.hide();f.show();g.slideUp(400);b.prop("data-card-expanded",
!1);c.logCount(c.CSM_METRICS.ATTACH_SHOW_LESS)})})};d.initializeAccessoriesTiles=function(){n.when("a-truncate").execute(function(b){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(k.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(k.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})});a.$(k.PANE_ACCESSORY_TILE_ITEM).attr("tabindex",0)};d.initializeCategorizedAccessoriesCards=function(){b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",
function(){c.logAccessoryImpressions(d.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){c.logAccessoryImpressions(d.createAccessoryImpressions())}))};d.initializeAccessoriesCarousel=function(){n.when("a-truncate","a-carousel-framework").execute(function(b,f){if(a.$(k.PANE_ACCESSORY_CAROUSEL).length){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});f.createAll();var e=f.getCarousel(a.$(k.PANE_ACCESSORY_CAROUSEL));e&&(e.attachViewedPages=
[1],e.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=e.getAttr("pageNumber"),-1===e.attachViewedPages.indexOf(a)&&(e.attachViewedPages.push(a),c.logAccessoryImpressions(d.createAccessoryImpressions())))}))}})};d.initializeCoupons=function(){var b;a.$(k.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",d.handleCouponPopoverPositionUpdated);
a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=d.createCouponPopoverPositionHandler(c);a.$(p).bind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(p).unbind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox",
"change",function(b){var c=b.data,f=b.$currentTarget.parents(k.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){d.handleCouponClaimSuccess(f,c.accessoryItemIndex)}).fail(function(a,b,c){n.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");d.handleCouponClaimError(f)}):(n.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),d.handleCouponClaimError(f))})};d.handleCouponPopoverPositionUpdated=
function(a){a.popover.$container.css("z-index",6E3)};d.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};d.handleCouponClaimSuccess=function(a,b){c.logPromotionClaimed(d.getAccessoryLoggingData(b-1));a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(k.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(k.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),
a.find(k.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};d.handleCouponClaimError=function(a){a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};d.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var f=d.convertTimeLeftToString(c);
a.$("#attach-accessory-deal-timer-string-"+b).text(f);0===c?d.handleDealHasEnded(b):setTimeout(d.updateLightningDealTimer,1E3,b)};d.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a):b+":"+d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a)};d.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};d.handleDealHasEnded=function(b){a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&
(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};d.updateLightningDealTimeToCheckoutTimer=function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var f=d.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(f);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+
b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(d.updateLightningDealTimeToCheckoutTimer,1E3,b)};d.handleLightningDealAddToCart=function(b,c,f){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===f?a.$("#attach-accessory-deal-on-waitlist-"+
b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),d.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};d.initializeLightningDealStatusRefresher=function(c){var f=a.$("#attach-accessory-claim-deal-params-"+c).val(),e=JSON.parse(b.unescapeJson(f));a.$("#attach-accessory-deal-has-ended-"+c).hasClass("aok-hidden")&&(f=[{dealID:e.dealId}],
f=JSON.stringify({requestMetadata:{marketplaceID:a.$(k.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:f,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:f,success:function(a){a=a.dealStatus[e.dealId];var b=Number.MAX_VALUE;a&&d.updateLightningDealInfo(c,a.dealState,a.percentClaimed)&&
setTimeout(d.initializeLightningDealStatusRefresher,b<a.msCacheTtl?b:3E4,c)}}))};d.updateLightningDealInfo=function(b,c,f){if("AVAILABLE"!==c&&"WAITLIST"!==c)return d.handleDealHasEnded(b),!1;var e=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===c?e.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&e.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(f);a.$("#attach-accessory-deal-progress-bar-width-"+
b).width(f+"%");return!0};return d});"use strict";n.when("A","attach-common","attach-weblabs","attach.utilities.focus-management").register("attach-desktop-side-sheet",function(a,b,g,e){var c={},l=[],r=-1,h,m,n,f,w,v,d=null,x=null,t=null,y=!1,A=null,C="false",B="auto",k=null,u=c.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox"};c.transitionDuration=500;c.onKeyDown=function(a){27===
a.which&&c.next()};c.initialize=function(){l=[];b.elementExists(u.MODAL_LAYER)?f=a.$(u.MODAL_LAYER):(f=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),f.hide(),f.appendTo(document.body));b.elementExists(u.SHEET)?c.$container=a.$(u.SHEET):(c.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),c.$container.addClass("aok-hidden"),c.$container.appendTo(u.PLACEHOLDER));d=c.$container.parent();b.elementExists(u.LIGHTBOX)||
(w=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-dss-backdrop' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e"),w.hide(),w.appendTo(f),w.click(c.next));a.$(document).unbind("keydown",c.onKeyDown);a.$(document).keydown(c.onKeyDown);h=function(){};m=function(){};n=!0};c.setFailureHandler=function(a){h=a};c.setCloseHandler=function(a){m=a};c.fail=function(a,b){h(a,b)};c.addPane=function(a){l.push(a)};c.removePane=function(a){a=l.indexOf(a);-1<a&&l.splice(a,1)};
c.getPaneIndex=function(a){return l.indexOf(a)};c.insertPane=function(a,b){b===z&&(b=l.length);l.splice(b,0,a);n=!0};c.hasPane=function(a){return-1<c.getPaneIndex(a)};c.next=function(){if(r+1===l.length){w.hide();c.$container.animate({right:v},{duration:c.transitionDuration,complete:function(){l[r].hide();r=-1;m();f.hide();k.focus();c.$container.appendTo(d)}});p.ue&&p.ue.count&&p.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(p.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);var b=a.$(u.PAGE_BACKGROUND).get(0);
document.body.style.overflow=B;b.ariaHidden=C;x.remove();t.remove();a.trigger("HIDE_SIDE_SHEET")}else-1!==r&&(l[r].hide(),l[r+1].show(),r+=1)};c.show=function(){if(n){n=!1;var b=a.$.map(l,function(a){return a.load(c)});a.$.when.apply(a.$,b).fail(c.fail).done(function(){a.$.each(l,function(a,b){b.setup(c)});c.show()})}else{f.show();c.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(f);r=0;l[r].show();v=c.$container.css("right");c.$container.removeClass("aok-hidden");
c.$container.animate({right:"0"},c.transitionDuration,"linear");w.show();p.ue&&p.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",p.ue.count(b,(p.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",p.ue.count(b,(p.ue.count(b)||0)+1));b=document.body;var d=a.$(u.PAGE_BACKGROUND).get(0);C=d.ariaHidden;d.ariaHidden="true";B=b.style.overflow;b.style.overflow="hidden";
k=document.activeElement;x=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(c.$container);t=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(c.$container)}};c.isEmpty=function(){return 0===l.length};document.addEventListener("focus",function(a){if(!y&&-1!==r){var b=c.$container.get(0);b.contains(a.target)?A=a.target:(y=!0,e.focusDescendant(b,"first"),A===document.activeElement&&e.focusDescendant(b,"last"),y=!1,A=document.activeElement)}},!0);c.isOpen=function(){return-1!==r};
return c});"use strict";n.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach.utilities.data-driven-weblabs","attach-variant-registration").register("attach-desktop",function(a,b,g,e,c,l,r,h,m,D){var f={},w,v=!0,d=f.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",
LD_CLAIM_ERROR:"deals_claimDealError"},x=f.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},t=f.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",
WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc",ALM_BRAND_ID:"#attach-alm-brand-id"},y=f.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},A=function(){a.off(d.LD_CLAIM_SUCCESS,A);a.off(d.LD_CLAIM_ERROR,C);b.selectedBaseLightningDeal=!0;h.setCloseHandler(f.setupAddToCartButton);f.handleLdAddToCartClick();n.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},
C=function(){a.off(d.LD_CLAIM_ERROR,C);a.off(d.LD_CLAIM_SUCCESS,A);a.$(t.LD_ATC_BUTTON).bind(d.CLICK,B)},B=function(){a.$(t.LD_ATC_BUTTON).unbind(d.CLICK,B);a.on(d.LD_CLAIM_SUCCESS,A);a.on(d.LD_CLAIM_ERROR,C)};f.initialize=function(){m.initializeWeblabsToTriggerClientSide();if(!b.elementExists(h.Selectors.PLACEHOLDER))if(m.weblabsToTriggerClientSide.length)v=!1;else return!1;f.setupDependencies();f.setupSideSheet();f.setupAddToCartButton()};f.setupDependencies=function(){var b=a.$(t.ATTACH_MARKETPLACE_ID).val();
e.initialize(e.FEATURES.DSS,b);e.setPayloadBuilder(function(){return{baseAsin:a.$(t.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(t.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(t.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(t.QUANTITY).val())||1,almBrandId:a.$(t.ALM_BRAND_ID).val()||null}});c.initialize();n.when("attach-external-atc-interceptor").execute(function(a){w=a;w.enableModule()})};f.setupSideSheet=function(){h.initialize();h.setFailureHandler(f.failure);
!g.isWarrantyPaneSuppressed()&&b.hasWarranty()?h.addPane(l):r.setShouldIncludeMaple(!0);!g.servicesInterstitialDeprecated()||b.hasAccessories()?(h.addPane(r),h.setCloseHandler(f.setupAddToCartButton)):h.setCloseHandler(f.failureTransitionToHUC)};f.setupAddToCartButton=function(){a.$(document.body).delegate(t.ADD_TO_CART_BUTTON,d.ATTACH_ATC_CLICK_NAMESPACE,f.handleAddToCartClick);a.$(t.ADD_TO_CART_BUTTON).prop("type","button").addClass(y.ATTACH_DSS_ATC);e.logCount(e.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};
f.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:f.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:f.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:f.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:f.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:f.failureTransitionToHUC()}};f.failureError500=function(){p.location=x.ERROR_500_URL};f.failureResubmitBuyBox=function(){b.selectedBaseLightningDeal?f.failureRebindATC():(f.failureUnbindATC(),
b.buyButton.click())};f.failureUnbindATC=function(){a.$(document.body).undelegate(t.ADD_TO_CART_BUTTON,d.ATTACH_ATC_CLICK_NAMESPACE);a.$(t.ADD_TO_CART_BUTTON).prop("type","submit")};f.failureTransitionToHUC=function(){if(b.selectedBaseLightningDeal)return f.failureUnbindATC();g.servicesInterstitialDeprecated()?a.$(document.body).undelegate(t.ADD_TO_CART_BUTTON,d.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(t.ADD_TO_CART_BUTTON,d.WARRANTY_SI_CLICK_NAMESPACE);f.failureResubmitBuyBox()};f.failureRebindATC=
function(){f.setupAddToCartButton()};f.handleAddToCartClick=function(c){b.buyButton=a.$(c.target);a.$(document.body).undelegate(t.ADD_TO_CART_BUTTON,d.ATTACH_ATC_CLICK_NAMESPACE);b.elementExists(t.LD_BUY_BOX)&&a.$(t.LD_ATC_BUTTON).unbind(d.CLICK,B);b.selectedBaseLightningDeal||!g.servicesInterstitialDeprecated()||b.hasAccessories()||h.setCloseHandler(f.failureTransitionToHUC);a.$.when().pipe(f.checkAndTriggerClientSideWeblabs).pipe(f.checkWarranty).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure);
if(v)return c.preventDefault(),c.stopImmediatePropagation(),!1};f.handleLdAddToCartClick=function(){a.$(document.body).undelegate(t.ADD_TO_CART_BUTTON,d.ATTACH_ATC_CLICK_NAMESPACE);a.$(t.LD_ATC_BUTTON).unbind(d.CLICK,B);a.$.when().pipe(f.checkAndTriggerClientSideWeblabs).pipe(f.checkWarranty).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure)};f.checkFeatureExists=function(){if(f.shouldSuppressForFeatureNotPresent())return b.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=
!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};f.checkWarranty=function(){g.isWarrantyPaneSuppressed()||(!b.selectedBaseLightningDeal||!b.isMultiQuantityDeal()&&a.$("#atch__bl").length&&a.$("#attach-warranty-ld #attach-warranty-asin").val()?f.shouldSuppressForWarrantyInMbb()?(h.removePane(l),r.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1)):g.servicesInterstitialDeprecated()&&
f.shouldSuppressforMultiQuantityMonthlyWarranty()&&(h.removePane(l),r.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1)):(h.getPaneIndex(l),h.removePane(l)))};f.checkAndTriggerClientSideWeblabs=function(){m.shouldTriggerClientSideWeblabsEarly&&m.triggerClientSideWeblabs();if(!g.servicesInterstitialDeprecated()&&!b.elementExists(t.ATTACH_ASIN_LIST))return b.reject(b.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};f.handleSICheck=
function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(h.removePane(l),r.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};f.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};f.shouldSuppressForFeatureNotPresent=function(){return g.servicesInterstitialDeprecated()?!b.elementExists(h.Selectors.PLACEHOLDER)||h.isEmpty():!b.elementExists(h.Selectors.PLACEHOLDER)||
!b.elementExists(t.ATTACH_ASIN_LIST)||!b.elementExists(t.ATTACH_MARKETPLACE_ID)||!b.elementExists(t.ATTACH_BASE_ASIN)};f.shouldSuppressForWarrantyInMbb=function(){return g.isWarrantyTwisterPlusDesktopEnabled()?0<a.$(t.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(t.WTY_TWISTER_SELECTED_GROUP).filter(t.WTY_TWISTER_WTY_OPTION).length:0<a.$(t.MBB_WARRANTY_ITEM).filter(":checked").length};f.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var c=Number(a.$(t.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&
1<c};f.show=function(){h.show()};return f});n.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,b,g){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";n.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,g){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(g("session-id"))});"use strict";n.when("A","attach-logging","ready").register("attach-categorized-cards",
function(a,b){var g=self.Selectors={CATEGORIZED_ACCESSORIES_PANE:"#attach-categorized-accessories",CATEGORIZED_ACCESSORIES_SEE_MORE:".category-see-more",CATEGORIZED_ACCESSORIES_SEE_LESS:".category-see-less",CATEGORIZED_CARD_EXPAND_CONTENT:".card-expand-content",CATEGORIZED_CARD_EXPANDABLE:".card-expandable",CATEGORIZED_CARD_CATEGORY:".card-category"},e=self.Constants={CATEGORY_CARD_EXPANDED:"category-card-expanded",CATEGORY_CARD_PREVIOUSLY_EXPANDED:"category-card-previously-expanded"};self.initializeCategorizedCards=
function(){a.$(g.CATEGORIZED_ACCESSORIES_PANE+g.CATEGORIZED_CARD_EXPANDABLE+" "+g.CATEGORIZED_CARD_CATEGORY).each(function(){var c=a.$(this),l=c.find(g.CATEGORIZED_ACCESSORIES_SEE_MORE),r=c.find(g.CATEGORIZED_ACCESSORIES_SEE_LESS),h=c.find(g.CATEGORIZED_CARD_EXPAND_CONTENT);l.show();r.hide();h.hide();c.removeProp(e.CATEGORY_CARD_EXPANDED);c.removeProp(e.CATEGORY_CARD_PREVIOUSLY_EXPANDED);l.click(function(){l.hide();r.show();h.slideDown(400);c.prop(e.CATEGORY_CARD_EXPANDED,!0);c.parent().animate({scrollTop:c.get(0).offsetTop-
30},400);b.logCount(b.CSM_METRICS.ATTACH_SHOW_MORE)});r.click(function(){r.hide();l.show();h.slideUp(400);c.prop(e.CATEGORY_CARD_EXPANDED,!1);b.logCount(b.CSM_METRICS.ATTACH_SHOW_LESS)})})};return self});"use strict";n.when("A","attach-logging","attach-weblabs").register("attach-secondary-side-sheet",function(a,b,g){var e=a.$;g={name:"secondary-side-sheet"};var c={},l=g.Utilities={},r,h,m=g.AuiConstants={AUI_SPINNER:".a-spinner-wrapper",AOK_HIDDEN:"aok-hidden"},n=g.Htmltags={LI:"li",IMG:"img",IMG_SRC:"src",
IMG_ALT:"alt",INPUT:"input",DATA_ASININDEX:"asinindex"},f=g.CssProsVal={CSS_DISPLAY:"display",CSS_DISPLAY_INLINE_BLOCK:"inline-block",CSS_WIDTH:"width",CSS_HEIGHT:"height"},p=g.Declarative={ATTACH_ACCESSORY_MINI_DP:"attach_accessory_mini_dp",MINI_DP_ATC:"mini_dp_add_to_cart",MINI_DP_BACK_BUTTON:"mini_dp_back_button",MINI_DP_NO_THANKS:"mini_dp_no_thanks"},v=g.Events={UPSELL_ASIN_ADDED_TO_CART:"UPSELL_ASIN_ADDED_TO_CART",UPSELL_ASIN_NOT_ADDED_TO_CART:"UPSELL_ASIN_NOT_ADDED_TO_CART",HIDE_SIDE_SHEET:"HIDE_SIDE_SHEET",
CLICK:"click",ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY:"LOADED_ACCESSORIES_PANE_SUCCESSFULLY",RESET_SECONDARY_SIDE_SHEET_MODULE:"RESET_SECONDARY_SIDE_SHEET_MODULE"},d=g.Selectors={PANE_ACCESORIES_CARD:"#attach-accessories",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_DISPLAY:".attach-accessory-display-row, .attach-accessory-tile",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",
BASE_ASIN:"#ASIN",SECONDARY_SIDE_SHEET:".secondary-side-sheet",BACK_BUTTON:".back-button",MINI_DP_VIEW:".miniDp-view",MINI_DP_RESPONSE:".miniDpResponse",ASIN_TITLE:".asin-title",ASIN_REVIEW:".asin-review",ASIN_REVIEW_ROW:".asin-review-row",PRICE_OFFER_ROW:".price-offer-row",ASIN_OFFER_PRICE:".asinOfferPrice",PRODUCT_IMAGE_MAIN:".productImageMain",PRODUCT_IMAGES_LIST:".productImagesList",FEATURE_BULLET_POINTS:".featureBulletPoints",MINI_DP_PRODUCT_FEATURES:".mini_dp_product_features",MINI_DP_IMG_THUMBNAIL_LIST:".imgThumbnailList",
MINI_DP_ACTION_BUTTONS:".miniDp_action_buttons",MINI_DP_ACTION_BUTTONS_STATES:".miniDp-action-buttons-states",MINI_DP_ADD_ACCESSORY_ALERT:"#miniDp_attach_add_accessory_alert",MINI_DP_ADD_ACCESSORY_ERROR:"#miniDp_attach_add_accessory_error",MINI_DP_ADD_TO_CART_RETRY:".attach-add-to-cart-retry",MINI_DP_ADD_ACCESSORY_ASIN:"#attach-minidp-accessory-asin"},x=g.RefTags={MINI_DP_SUCCESSFUL_LOAD:"dp_atch_dss_ss_ce_",MINI_DP_ADD_ACCESSORY_CLICK:"dp_atch_dss_atc_ce_",MINI_DP_BACK_BUTTON_CLICK:"dp_atch_dss_ss_back_ce_",
MINI_DP_NO_THANKS_CLICK:"dp_atch_dss_ss_nt_ce_",MINI_DP_ADD_TO_CART_SUCCESS:"dp_atch_dss_atc_success_ce_",MINI_DP_ADD_TO_CART_FAILURE:"dp_atch_dss_atc_fail_ce_"},t=g.MiniDpAjax={ENDPOINT:"/gp/product/ajax?experienceId\x3dminidp",MINI_DP_AJAX_ENDPOINT:"/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?",MINI_DP_AJAX_TAB:"\x26activeTab\x3d0",TEXT_STATUS_SUCCESS:200};l.showHideSpinner=function(b){b?a.$(m.AUI_SPINNER).show():a.$(m.AUI_SPINNER).hide()};l.isCategoryView=function(){return a.$(d.PANE_CATEGORIZED_ACCESSORIES_CARD).length?
!0:!1};l.showSecondarySideSheet=function(b){b?(l.isCategoryView()?a.$(d.PANE_CATEGORIZED_ACCESSORIES_CARD).hide():a.$(d.PANE_ACCESORIES_CARD).hide(),a.$(d.SECONDARY_SIDE_SHEET).slideDown(1E3),l.showHideSpinner(!0),a.$(d.BACK_BUTTON).show(),a.$(d.SECONDARY_SIDE_SHEET+" "+d.MINI_DP_VIEW).hide()):(l.isCategoryView()?a.$(d.PANE_CATEGORIZED_ACCESSORIES_CARD).slideDown(2E3):a.$(d.PANE_ACCESORIES_CARD).slideDown(2E3),a.$(d.BACK_BUTTON).hide(),a.$(d.SECONDARY_SIDE_SHEET).hide())};g.init=function(){a.declarative(p.ATTACH_ACCESSORY_MINI_DP,
v.CLICK,function(g){function w(){e(d.MINI_DP_VIEW+" "+d.MINI_DP_IMG_THUMBNAIL_LIST+" "+n.LI).hover(function(a){a=e(this).find(n.IMG).attr(n.IMG_SRC);e(d.MINI_DP_VIEW+" "+d.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_SRC,a);b.logCount(b.CSM_METRICS.MINI_DP_CAROUSEL_THUMBNAIL_CHANGE)})}function D(){l.showSecondarySideSheet(!1);var f=e(d.SECONDARY_SIDE_SHEET).data(n.DATA_ASININDEX);f in c||(a.$(d.PANE_ACCESSORY_ADD_BUTTON_PREFIX+f).find(n.INPUT).click(),c[f]=!0,b.logSecondarySheetRefTag(x.MINI_DP_ADD_ACCESSORY_CLICK+
G+"_"+q.upsellasin),b.logCount(b.CSM_METRICS.MINI_DP_ATC),b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME))}function y(){var a=e(d.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+G).css(f.CSS_DISPLAY),b=e(d.PANE_ACCESSORY_ADD_ERROR_PREFIX+G).css(f.CSS_DISPLAY);a===f.CSS_DISPLAY_INLINE_BLOCK?(e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ALERT).removeClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ERROR).addClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS).addClass(m.AOK_HIDDEN)):
b===f.CSS_DISPLAY_INLINE_BLOCK?(e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ERROR).removeClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ALERT).addClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS).addClass(m.AOK_HIDDEN)):(e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ALERT).addClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS_STATES+" "+d.MINI_DP_ADD_ACCESSORY_ERROR).addClass(m.AOK_HIDDEN),e(d.MINI_DP_ACTION_BUTTONS).removeClass(m.AOK_HIDDEN))}
function k(){a.$(d.MINI_DP_VIEW+" "+d.ASIN_TITLE).html(E);a.$(d.MINI_DP_VIEW+" "+d.ASIN_REVIEW).html(F);a.$(d.MINI_DP_VIEW+" "+d.PRICE_OFFER_ROW).html(H);a.$(d.MINI_DP_VIEW+" "+d.ASIN_OFFER_PRICE).html(J);var b=a.$(d.MINI_DP_RESPONSE+" "+d.PRODUCT_IMAGES_LIST+" "+n.LI+" "+n.IMG);b=a.$(b).map(function(){return a.$(this).attr(n.IMG_SRC)});e(d.MINI_DP_VIEW+" "+d.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_SRC,b[0]);e(d.MINI_DP_VIEW+" "+d.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_ALT,b[0]);b=e(d.MINI_DP_RESPONSE+
" "+d.PRODUCT_IMAGES_LIST).clone();e(d.MINI_DP_VIEW+" "+d.MINI_DP_IMG_THUMBNAIL_LIST).html(b[0]);w();e(d.MINI_DP_VIEW+" "+d.MINI_DP_IMG_THUMBNAIL_LIST+" "+n.IMG).each(function(){e(this).removeAttr(f.CSS_WIDTH).removeAttr(f.CSS_HEIGHT)});b=e(d.MINI_DP_RESPONSE+" "+d.FEATURE_BULLET_POINTS).clone();e(d.MINI_DP_VIEW+" "+d.MINI_DP_PRODUCT_FEATURES).html(b);y()}a.$(g.$target).attr("id");var u=a.$(g.$declarativeParent);g=a.$(g.$target).closest(d.PANE_ACCESSORY_DISPLAY);var q=a.$(u).data(p.ATTACH_ACCESSORY_MINI_DP),
E=q.title,F=a.$(g).find(d.ASIN_REVIEW_ROW).html(),H=a.$(g).find(d.PRICE_OFFER_ROW).html(),J=q.offerprice,G=q.asinIndex;h=G;r=q.upsellasin;e(d.MINI_DP_ADD_ACCESSORY_ASIN).val(r);e(d.SECONDARY_SIDE_SHEET).data(n.DATA_ASININDEX,G);l.showSecondarySideSheet(!0);b.logCount(b.CSM_METRICS.MINI_DP_OPEN);b.beginLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME);a.get(t.ENDPOINT,{params:{asin:q.upsellasin},success:function(c,f,g){g.http.status===t.TEXT_STATUS_SUCCESS&&c!==z&&(a.$(d.SECONDARY_SIDE_SHEET+" "+d.MINI_DP_RESPONSE).html(c),
k(),l.showHideSpinner(!1),a.$(d.SECONDARY_SIDE_SHEET+" "+d.MINI_DP_VIEW).show());a.declarative(p.MINI_DP_ATC,v.CLICK,D);e(d.MINI_DP_VIEW+" "+d.MINI_DP_ADD_TO_CART_RETRY).unbind(v.CLICK).bind(v.CLICK,D);b.logSecondarySheetRefTag(x.MINI_DP_SUCCESSFUL_LOAD+G+"_"+q.upsellasin)},error:function(a,b,c){l.showSecondarySideSheet(!1)}})});a.declarative(p.MINI_DP_BACK_BUTTON,v.CLICK,function(a){l.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(x.MINI_DP_BACK_BUTTON_CLICK+h+"_"+r);b.logCount(b.CSM_METRICS.MINI_DP_BACK);
b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.declarative(p.MINI_DP_NO_THANKS,v.CLICK,function(a){l.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(x.MINI_DP_NO_THANKS_CLICK+h+"_"+r);b.logCount(b.CSM_METRICS.MINI_DP_CANCEL);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.on(v.UPSELL_ASIN_ADDED_TO_CART,function(a){a in c||(c[a]=!0);b.logSecondarySheetRefTag(x.MINI_DP_ADD_TO_CART_SUCCESS+h+"_"+r);b.endLatencyCapture(b.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY)});a.on(v.UPSELL_ASIN_NOT_ADDED_TO_CART,
function(a){a in c&&delete c[a];b.logSecondarySheetRefTag(x.MINI_DP_ADD_TO_CART_FAILURE+h+"_"+r)});a.on(v.HIDE_SIDE_SHEET,function(){l.showSecondarySideSheet(!1)})};g.resetSecondarySideSheet=function(){c={}};a.on(v.ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY,g.init);a.on(v.RESET_SECONDARY_SIDE_SHEET_MODULE,g.resetSecondarySideSheet);return g});"use strict";n.when("A","3p-promise","attach.utilities.price-formatter").register("attach.amazonapi.client",function(a,b,g){var e={buildRequestUrl:function(b){var c=
a.$("#attach-aapi-ajax-endpoint").val()+"/"+b.apiPath,e=[];if(b.additionalParameters)for(var g in b.additionalParameters)b.additionalParameters.hasOwnProperty(g)&&e.push(g+"\x3d"+encodeURIComponent(b.additionalParameters[g]));e.length&&(c+="?"+e.join("\x26"));return c},buildAcceptHeader:function(a){var b=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildRequestHeaders:function(b){var c=
a.$("#attach-aapi-ajax-csrf-token").val();c={Accept:e.buildAcceptHeader(b),"Accept-Language":a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"),"x-cc-currency-of-preference":a.$("#attach-currency-of-preference").val(),"x-api-csrf-token":c};b.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+b.requestType+'"');return c},makeRequest:function(c){return new b(function(b,g){var h=e.buildRequestUrl(c),l=e.buildRequestHeaders(c),n=c.data?
JSON.stringify(c.data):z;return a.$.ajax({type:c.method,url:h,headers:l,data:n,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){b(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(v){b.data=a.responseText}g(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&"undefined"!==typeof a.xhr},formatMoney:function(b){return b.displayString?b.displayString:b.convertedFrom&&b.currencyCode===b.convertedFrom.currencyCode&&
b.convertedFrom.displayString?b.convertedFrom.displayString:g.formatPrice(Number(b.amount),b.currencyCode||a.$("#attach-currency-of-preference").val(),a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"))}};return e});"use strict";n.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",function(a){var b={RESPONSE_TYPE_SUCCESS:"cart.add-items/v1",RESPONSE_TYPE_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"},g=function(a){return a},e=function(a){if(a.data&&
"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;};b.addItems=function(b,l){b={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:b},additionalParameters:{}};l&&(b.additionalParameters.ref=l);return a.makeRequest(b).then(g).catch(e)};return b});"use strict";n.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(b,g){b={apiPath:"cart/items",requestType:"cart.items.request/v1",
responseType:"cart.items/v1",method:"GET",additionalParameters:b};g&&(b.additionalParameters.ref=g);return a.makeRequest(b)}}});"use strict";n.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var b={CART_TYPE_RETAIL:"RETAIL",EMPTY_CART_RETAIL:{itemCount:0,lastModified:null,cartType:"RETAIL",subtotal:{amount:0}}},g=function(a){return a};b.get=function(b){var c={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(c.additionalParameters.cartTypes=
b);return a.makeRequest(c).then(g)};return b});"use strict";n.when("attach.amazonapi.client").register("attach.amazonapi.deals.claim-and-add-to-cart",function(a){var b={RESPONSE_TYPE_SUCCESS:"deals.claim.response/v1",RESPONSE_TYPE_QUANTITY_ERROR:"deal.claim.quantity_restriction_violation.error/v1",RESPONSE_TYPE_ERROR:"error/v1"},g=function(a){return a},e=function(a){throw a;};b.claimAndAddDeal=function(b,l){return a.makeRequest({apiPath:"deals/"+b+"/claim-and-add-to-cart",requestType:"deals.claim.request/v1",
responseType:"deals.claim.response/v1",method:"POST",data:{asin:l,quantity:1}}).then(g).catch(e)};return b});"use strict";n.when("A").register("attach.amazonapi.products.media-builder",function(a){var b={},g,e,c,l,n,h,m,p;b.init=function(a){g=a;n=l=c=e=z;h=g.width;m=g.height;p=[];g.styleCode&&p.push(encodeURIComponent(g.styleCode));return b};b.cdn=function a(a){e=a;return b};b.withNameAndOU=function(a,e,g){c=a.startsWith("/")?a.substring(1):a;l=1===e.length?"0"+e:e;n=g;return b};b.crop=function(a,
c,e,d){h=Math.round(Math.min(e,h-a));m=Math.round(Math.min(d,m-c));p.push("_CR"+[a,c,e,d].join());return b};b.autoCrop=function(){p.push("_AC");return b};b.blur=function(a){p.push("_BL"+a);return b};b.scaleToRectangle=function(a,c){h=a;m=c;p.push("_SR"+a+","+c);return b};b.scaleToSquare=function(a){m=h=a;p.push("_SS"+a);return b};b.scaleToWidth=function(a){h>a&&(m=Math.round(a*m/h),h=Math.round(a));p.push("_SX"+a);return b};b.scaleToHeight=function(a){m>a&&(h=Math.round(a*h/m),m=Math.round(a));p.push("_SY"+
a);return b};b.scaleToLongest=function(a){h>m?a<h&&(m=Math.round(a*m/h),h=Math.round(a)):a<m&&(h=Math.round(a*h/m),m=Math.round(a));p.push("_SL"+a);return b};b.upscaleToHeight=function(a){h=0<m?Math.round(a*h/m):0;m=Math.round(a);this.rendering.push("_UY"+a);return b};b.upscaleToLongest=function(a){h>m?(m=Math.round(a*m/h),h=Math.round(a)):(h=0<m?Math.round(a*h/m):0,m=Math.round(a));this.rendering.push("_UL"+a);return b};b.upscaleToWidth=function(a){m=0<h?Math.round(a*m/h):0;h=Math.round(a);this.rendering.push("_UX"+
a);return b};b.custom=function a(a){this.rendering.push(encodeURIComponent(a));return b};b.build=function(){var a=[];a.push("https://");a.push(e?e:"m.media-amazon.com");c?a.push("/images/G/",l,"/",c,"._CB",n):a.push("/images/I/",g.physicalId,".");p.length&&a.push(p.join(""));(n||p.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(g.extension);return{url:a.join(""),width:h,height:m}};return b});"use strict";n.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",
function(a){return{RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{LINKS:"links(product.links/v2)",PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(b,g,e,c){b={apiPath:"products/"+b,requestType:"product.request/v2",responseType:"product/v2",method:"GET",resourceInclusions:g,additionalParameters:e||{}};c&&(b.additionalParameters.ref=c);return a.makeRequest(b)},getProductsBatch:function(b,g,e,c){b={apiPath:"products/"+b.join(","),requestType:"product.request/v2",
responseType:"collection(product/v2)/v1",method:"GET",resourceInclusions:g,additionalParameters:e||{}};c&&(b.additionalParameters.ref=c);return a.makeRequest(b)}}});"use strict";n.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},
Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",UPDATE_SUMMARY:"attach:cart:summary:update"}}});"use strict";n.when("A").register("attach.utilities.data-driven-weblabs",function(a){function b(b){var c=a.$(b).val();b=[];if(c&&0<c.length){c=c.slice(1,-1).split(",");for(var e=0;e<c.length;e++){var g=c[e].trim();0<g.length&&b.push(g)}}return b}var g={shouldTriggerClientSideWeblabsEarly:!0,weblabsToTriggerClientSide:[]},e=!1;g.initializeWeblabsToTriggerClientSide=
function(){g.weblabsToTriggerClientSide=c();a.$("#attach-asin-list").val()&&(g.shouldTriggerClientSideWeblabsEarly=!1)};g.triggerClientSideWeblabs=function(){g.weblabsToTriggerClientSide.length&&!e&&p.ue&&ue.trigger&&(g.weblabsToTriggerClientSide.forEach(function(a){ue.trigger(a[0],a[1])}),e=!0)};var c=function(){return b("#attach-weblabsToTriggerOnAddToCart").map(function(a){return a.split(":")})};return g});"use strict";n.register("attach.utilities.focus-management",function(){var a={attemptFocus:function(a){try{a.focus()}catch(g){}return a===
document.activeElement},focusDescendant:function(b,g){if(b&&b.children)for(var e=0;e<b.children.length;e++){var c=b.children.item("last"===g?b.children.length-e-1:e);if(a.attemptFocus(c)||a.focusDescendant(c,g))return!0}return!1}};return a});"use strict";n.when("attach-logging").register("attach.utilities.price-formatter",function(a){var b={};return{formatPrice:function(g,e,c){if(!p.Intl||!p.Intl.NumberFormat)return a.logCount("attach.utilities.price-formatter:UsedSimpleFormat"),e+" "+g.toFixed(2);
a.logCount("attach.utilities.price-formatter:UsedIntlNumberFormat");var l=c+"/"+e;b.hasOwnProperty(l)||(b[l]=new Intl.NumberFormat(c,{style:"currency",currency:e}));return b[l].format(g)}}});"use strict";n.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(b,g){return b.replace(a,function(a,b){return g&&g.hasOwnProperty(b)?g[b]:""})}}});"use strict";n.when("A","attach-logging","attach.amazonapi.cart.add-items").register("attach-atc-stay-ajax",
function(a,b,g){function e(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_SUCCESS);n.when("nav.setCartCount").execute(function(b){b(a.entity.count.entity.items)})}return{atcStayPost:function(a,l){g.addItems(a.inputs,a.reftag).then(function(a){"add-items.incomplete-add.error/v1"===a.type&&b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE);e(a);l&&l(a)}).catch(function(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_FAILURE);throw a;})}}})});